(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{9725:function(e,s,a){Promise.resolve().then(a.bind(a,783))},783:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return l}});var t=a(7437),n=a(2265);function l(){let[e,s]=(0,n.useState)(""),[a,l]=(0,n.useState)([]),[i,c]=(0,n.useState)([]),[d,r]=(0,n.useState)(!1),[m,x]=(0,n.useState)("teams"),o=async()=>{r(!0);try{let s=e.trim().split("\n").filter(e=>e.trim());if("teams"===m){let e=s.map(e=>({name:e.trim(),league:e.includes("#")||e.includes("State")||e.includes("University")?"NCAAF":void 0})),a=await fetch("/api/match-teams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teams:e})}),t=await a.json();t.success&&(l(t.matches),c([]))}else{let e=s.map(e=>{let s=e.split(/[@vs]/i).map(e=>e.trim());if(s.length>=2){let a=e.includes("@");return{awayTeam:a?s[0]:s[1],homeTeam:a?s[1]:s[0],league:void 0}}return null}).filter(Boolean),a=await fetch("/api/match-teams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({games:e})}),t=await a.json();t.success&&(c(t.matches),l([]))}}catch(e){console.error("Error testing matches:",e)}finally{r(!1)}},h=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600",p=e=>({exact:"bg-green-100 text-green-800",alias:"bg-blue-100 text-blue-800",fuzzy:"bg-yellow-100 text-yellow-800",llm:"bg-purple-100 text-purple-800"})[e]||"bg-gray-100 text-gray-800";return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83C\uDFAF Entity Resolution Test"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Test team name matching and resolution for picksheets"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",value:"teams",checked:"teams"===m,onChange:e=>x(e.target.value),className:"mr-2"}),(0,t.jsx)("span",{children:"Match Teams"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",value:"games",checked:"games"===m,onChange:e=>x(e.target.value),className:"mr-2"}),(0,t.jsx)("span",{children:"Match Games"})]})]}),(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Enter ","teams"===m?"team names (one per line)":"games (format: Away @ Home or Home vs Away)"]}),(0,t.jsx)("textarea",{value:e,onChange:e=>s(e.target.value),className:"w-full h-48 p-3 border rounded-lg font-mono text-sm",placeholder:"teams"===m?"Enter team names...":"Enter games..."})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:o,disabled:d||!e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:d?"Matching...":"Test Matching"}),(0,t.jsx)("button",{onClick:()=>s("teams"===m?"Dallas\nKC Chiefs\nPhilly\nNew England\nTampa\nLA Chargers\n#11 Alabama\nMichigan State\nTexas Tech\nPenn St.":"Dallas @ Philadelphia\nKansas City vs LA Chargers\nTampa Bay @ Atlanta\n#11 Alabama vs Michigan State\nOhio St. @ Tennessee\nPatriots vs Bills"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Load Sample"}),(0,t.jsx)("button",{onClick:()=>{s(""),l([]),c([])},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Clear"})]})]}),a.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Team Matches"})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Original"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Matched"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"League"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Confidence"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Candidates"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.map((e,s)=>{var a;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:e.originalName}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm font-medium",children:e.matchedName}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("NFL"===e.league?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.league})}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(p(e.method)),children:e.method})}),(0,t.jsxs)("td",{className:"px-4 py-2 text-sm font-mono ".concat(h(e.confidence)),children:[(100*e.confidence).toFixed(0),"%"]}),(0,t.jsx)("td",{className:"px-4 py-2 text-xs text-gray-600",children:(null===(a=e.candidates)||void 0===a?void 0:a.map(e=>"".concat(e.name," (").concat((100*e.score).toFixed(0),"%)")).join(", "))||"-"})]},s)})})]})})})]}),i.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Game Matches"})}),(0,t.jsx)("div",{className:"p-6 space-y-4",children:i.map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 ".concat(e.needsVerification?"border-yellow-400 bg-yellow-50":"border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg",children:["Game ",s+1]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("span",{className:"px-2 py-1 text-sm font-medium rounded ".concat(e.overallConfidence>=.8?"bg-green-100 text-green-800":e.overallConfidence>=.6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[(100*e.overallConfidence).toFixed(0),"% Overall"]}),e.needsVerification&&(0,t.jsx)("span",{className:"px-2 py-1 text-sm bg-yellow-100 text-yellow-800 rounded",children:"⚠️ Needs Verification"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Away Team"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:e.awayTeam.originalName})," → ",(0,t.jsx)("span",{className:"font-medium",children:e.awayTeam.matchedName})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(p(e.awayTeam.method)),children:e.awayTeam.method}),(0,t.jsxs)("span",{className:"text-xs font-mono ".concat(h(e.awayTeam.confidence)),children:[(100*e.awayTeam.confidence).toFixed(0),"%"]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:"Home Team"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:e.homeTeam.originalName})," → ",(0,t.jsx)("span",{className:"font-medium",children:e.homeTeam.matchedName})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(p(e.homeTeam.method)),children:e.homeTeam.method}),(0,t.jsxs)("span",{className:"text-xs font-mono ".concat(h(e.homeTeam.confidence)),children:[(100*e.homeTeam.confidence).toFixed(0),"%"]})]})]})]})]})]},s))})]}),!d&&0===a.length&&0===i.length&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\uD83C\uDFAF How Entity Resolution Works"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Exact Match:"})," Direct match with official team name (100% confidence)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Alias Match:"})," Match with known nickname or abbreviation (95% confidence)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Fuzzy Match:"})," Approximate string matching using Fuse.js (60-90% confidence)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"LLM Verification:"})," OpenAI for ambiguous matches (85% confidence)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"NCAA Detection:"})," Identifies college teams by patterns (State, University, rankings)"]})]}),(0,t.jsxs)("div",{className:"mt-4 p-3 bg-white rounded",children:[(0,t.jsx)("h4",{className:"font-medium mb-1",children:"Confidence Levels:"}),(0,t.jsxs)("div",{className:"flex gap-4 text-xs",children:[(0,t.jsx)("span",{className:"text-green-600",children:"● High (≥80%)"}),(0,t.jsx)("span",{className:"text-yellow-600",children:"● Medium (60-79%)"}),(0,t.jsx)("span",{className:"text-red-600",children:"● Low (<60%)"})]})]})]})]})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9725)}),_N_E=e.O()}]);