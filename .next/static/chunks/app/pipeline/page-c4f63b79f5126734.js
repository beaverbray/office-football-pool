(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80],{1884:function(e,s,a){Promise.resolve().then(a.bind(a,9778))},9778:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return l}});var t=a(7437),i=a(2265);function l(){var e,s,a,l,n,r;let[c,d]=(0,i.useState)(""),[m,x]=(0,i.useState)(!1),[o,h]=(0,i.useState)(null),[p,u]=(0,i.useState)([]),[g,j]=(0,i.useState)(!1),[N,v]=(0,i.useState)(!1),y=async()=>{try{let e=await fetch("/api/pipeline/status"),s=await e.json();s.success&&u(s.pipelines||[])}catch(e){console.error("Failed to fetch pipeline history:",e)}},f=async()=>{if(!c.trim()){alert("Please enter picksheet text");return}x(!0);try{let e=await fetch("/api/pipeline/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({picksheetText:c,useOddsAPI:!0,useLLM:!0,includeLogs:g,matchingThreshold:.6})}),s=await e.json();s.success||s.pipeline?(h(s.pipeline),y()):alert("Pipeline failed: ".concat(s.error||"Unknown error"))}catch(e){console.error("Pipeline error:",e),alert("Failed to run pipeline")}finally{x(!1)}},b=async()=>{if(confirm("Clear all pipeline history?"))try{await fetch("/api/pipeline/status",{method:"DELETE"}),u([]),h(null)}catch(e){console.error("Failed to clear history:",e)}};(0,i.useEffect)(()=>{if(y(),N){let e=setInterval(y,5e3);return()=>clearInterval(e)}},[N]);let D=e=>{switch(e){case"success":return"text-green-600";case"partial":return"text-yellow-600";case"failed":return"text-red-600";default:return"text-gray-600"}},w=(e,s)=>{if(!1===s)return"❌";if(!0===s)return"✅";switch(e){case"parsing":return"\uD83D\uDCC4";case"odds_retrieval":return"\uD83D\uDCCA";case"matching":return"\uD83D\uDD17";case"comparison":return"\uD83D\uDCC8";case"completed":return"\uD83C\uDFAF";default:return"⏳"}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDE80 Pipeline Orchestrator Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600",children:"End-to-end picksheet analysis pipeline with real-time odds comparison"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Run New Pipeline"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Picksheet Text"}),(0,t.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),className:"w-full h-48 p-3 border rounded-lg font-mono text-sm",placeholder:"Paste picksheet text here..."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:g,onChange:e=>j(e.target.checked),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"Include detailed logs"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",checked:N,onChange:e=>v(e.target.checked),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"Auto-refresh (5s)"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:f,disabled:m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:m?"⏳ Running Pipeline...":"\uD83D\uDE80 Run Pipeline"}),(0,t.jsx)("button",{onClick:()=>d("Week 15 NFL Games\nDallas @ Philadelphia -3\nKansas City @ LA Chargers +7.5\nTampa Bay @ Atlanta -2.5\nNew England @ Buffalo -9.5\n\nCollege Games\n#11 Alabama @ Michigan State +14\nOhio State @ Tennessee -7\nTexas Tech @ Penn State -10"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Load Sample"}),(0,t.jsx)("button",{onClick:b,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 ml-auto",children:"Clear History"})]})]}),o&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Current Pipeline Result"}),(0,t.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded ".concat("success"===o.status?"bg-green-100 text-green-800":"partial"===o.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:o.status.toUpperCase()})]})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Parsing"}),(0,t.jsx)("span",{children:w("parsing",null===(e=o.parsing)||void 0===e?void 0:e.success)})]}),o.parsing&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Games: ",o.parsing.gamesFound]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[o.parsing.duration,"ms"]}),o.parsing.error&&(0,t.jsx)("div",{className:"text-xs text-red-600 mt-1",children:o.parsing.error})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Odds API"}),(0,t.jsx)("span",{children:w("odds_retrieval",null===(s=o.oddsRetrieval)||void 0===s?void 0:s.success)})]}),o.oddsRetrieval&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["NFL: ",o.oddsRetrieval.nflGames]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["NCAAF: ",o.oddsRetrieval.ncaafGames]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[o.oddsRetrieval.duration,"ms"]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Matching"}),(0,t.jsx)("span",{children:w("matching",null===(a=o.matching)||void 0===a?void 0:a.success)})]}),o.matching&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Rate: ",(100*o.matching.matchRate).toFixed(1),"%"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[o.matching.matches,"/",o.matching.totalGames]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[o.matching.duration,"ms"]})]})]}),(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"KPIs"}),(0,t.jsx)("span",{children:w("comparison",null===(l=o.comparison)||void 0===l?void 0:l.success)})]}),(null===(n=o.comparison)||void 0===n?void 0:n.kpis)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Avg Δ: ",o.comparison.kpis.avgSpreadDelta]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Key #: ",o.comparison.kpis.keyNumberCrossings]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[o.comparison.duration,"ms"]})]})]})]}),(null===(r=o.comparison)||void 0===r?void 0:r.kpis)&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Key Performance Indicators"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Match Rate:"}),(0,t.jsxs)("span",{className:"ml-2 font-medium",children:[(100*o.comparison.kpis.matchRate).toFixed(1),"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Avg Delta:"}),(0,t.jsx)("span",{className:"ml-2 font-medium",children:o.comparison.kpis.avgSpreadDelta})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Key Crossings:"}),(0,t.jsx)("span",{className:"ml-2 font-medium",children:o.comparison.kpis.keyNumberCrossings})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Median Delta:"}),(0,t.jsx)("span",{className:"ml-2 font-medium",children:o.comparison.kpis.medianSpreadDelta})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Favorite Flips:"}),(0,t.jsx)("span",{className:"ml-2 font-medium",children:o.comparison.kpis.favoriteFlips})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"P95 Delta:"}),(0,t.jsx)("span",{className:"ml-2 font-medium",children:o.comparison.kpis.p95SpreadDelta})]})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Total Duration: ",o.totalDuration,"ms"]}),o.logs&&o.logs.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Pipeline Logs"}),(0,t.jsx)("div",{className:"bg-gray-900 text-gray-100 p-3 rounded text-xs font-mono max-h-48 overflow-y-auto",children:o.logs.map((e,s)=>(0,t.jsx)("div",{children:e},s))})]})]})]}),p.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b",children:(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Pipeline History"})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Games"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Match Rate"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Delta"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:p.map(e=>{var s,a,i;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:new Date(e.timestamp).toLocaleTimeString()}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("span",{className:"text-sm font-medium ".concat(D(e.status)),children:e.status})}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:(null===(s=e.parsing)||void 0===s?void 0:s.gamesFound)||0}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:e.matching?"".concat((100*e.matching.matchRate).toFixed(1),"%"):"-"}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:(null===(i=e.comparison)||void 0===i?void 0:null===(a=i.kpis)||void 0===a?void 0:a.avgSpreadDelta)||"-"}),(0,t.jsxs)("td",{className:"px-4 py-2 text-sm",children:[e.totalDuration,"ms"]}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,t.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-800",children:"View"})})]},e.id)})})]})})})]})]})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=1884)}),_N_E=e.O()}]);