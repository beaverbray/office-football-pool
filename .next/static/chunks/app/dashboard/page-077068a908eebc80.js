(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2893:function(e,t,s){Promise.resolve().then(s.bind(s,1789))},1789:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(7437),n=s(2265);function r(){var e,t,s,r,o,c;let[l,i]=(0,n.useState)(!1),[d,x]=(0,n.useState)(""),[m,p]=(0,n.useState)(null),[h,g]=(0,n.useState)("delta"),[N,b]=(0,n.useState)("desc"),[u,j]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=localStorage.getItem("pipelineData"),t=localStorage.getItem("picksheetText");if(e)try{let t=JSON.parse(e);p(t),v(!0)}catch(e){console.error("Failed to load saved data:",e)}t&&x(t)},[]);let S=async()=>{if(!d.trim()){alert("Please enter picksheet text");return}i(!0);try{let e=await fetch("/api/pipeline/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({picksheetText:d,useOddsAPI:!0,useLLM:!0,includeLogs:!1})}),t=await e.json();t.pipeline&&(p(t.pipeline),v(!0),localStorage.setItem("pipelineData",JSON.stringify(t.pipeline)),localStorage.setItem("picksheetText",d))}catch(e){console.error("Pipeline error:",e)}finally{i(!1)}},y=e=>{h===e?b("asc"===N?"desc":"asc"):(g(e),b("desc"))},E=()=>{var e;if(!(null==m?void 0:null===(e=m.comparison)||void 0===e?void 0:e.comparisons))return[];let t=[...m.comparison.comparisons];return u&&(t=t.filter(e=>Math.abs(e.spreadDelta)>3||e.crossesKeyNumber||e.favoriteFlipped)),t.sort((e,t)=>{let s=0;switch(h){case"league":s=(e.league||"").localeCompare(t.league||"");break;case"date":s=new Date(e.gameTime||0).getTime()-new Date(t.gameTime||0).getTime();break;case"team":s=e.homeTeam.localeCompare(t.homeTeam);break;case"poolSpread":s=e.picksheetSpread-t.picksheetSpread;break;case"marketSpread":s=e.marketSpread-t.marketSpread;break;case"delta":s=Math.abs(e.spreadDelta)-Math.abs(t.spreadDelta);break;case"relDelta":s=Math.abs(0!==e.picksheetSpread?e.spreadDelta/Math.abs(e.picksheetSpread)*100:0)-Math.abs(0!==t.picksheetSpread?t.spreadDelta/Math.abs(t.picksheetSpread)*100:0);break;case"flags":s=(e.crossesKeyNumber?2:0)+(e.favoriteFlipped?1:0)-((t.crossesKeyNumber?2:0)+(t.favoriteFlipped?1:0))}return"asc"===N?s:-s}),t},k=e=>{let t=Math.abs(e);return t<=1?"text-green-500":t<=3?"text-orange-700":t<=5?"text-orange-800":"text-red-600"};return(0,a.jsxs)("div",{className:"min-h-screen bg-black text-gray-100",children:[(0,a.jsx)("div",{className:"bg-zinc-900 border-b border-zinc-800",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-mono font-bold text-orange-700",children:"SPREAD_ANALYSIS_SYSTEM"}),(0,a.jsx)("p",{className:"text-xs font-mono text-gray-500 mt-1",children:"PICKSHEET_MARKET_COMPARISON_ENGINE_V1.0"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[f&&(0,a.jsx)("span",{className:"text-xs font-mono text-green-500",children:"● DATA_LOADED"}),(0,a.jsx)("div",{className:"text-xs font-mono text-gray-500",children:m&&"TIMESTAMP: ".concat(new Date(m.timestamp).toISOString())})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"bg-zinc-900 rounded border border-zinc-800 p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-sm font-mono text-orange-700",children:"CONTROL_PANEL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("pipelineData"),localStorage.removeItem("picksheetText"),p(null),x(""),v(!1)},className:"px-3 py-1 text-xs font-mono bg-zinc-900 text-orange-700 border border-orange-800 rounded hover:bg-orange-950 transition-colors",children:"CLEAR_DATA"}),f&&(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 text-xs font-mono bg-zinc-900 text-gray-400 border border-gray-600 rounded hover:bg-zinc-800 transition-colors",children:"REFRESH_SYSTEM"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-xs font-mono text-gray-400 mb-2",children:"INPUT: PICKSHEET_DATA"}),(0,a.jsx)("textarea",{value:d,onChange:e=>x(e.target.value),className:"w-full h-32 p-3 bg-zinc-950 border border-zinc-700 rounded text-xs font-mono text-gray-300 focus:border-orange-700 focus:outline-none placeholder-zinc-600",placeholder:"[TEAM_AWAY] @ [TEAM_HOME] [SPREAD] Example: Dallas @ Philadelphia -3 ...",disabled:f})]}),(0,a.jsx)("button",{onClick:S,disabled:l||f,className:"px-6 py-2 bg-orange-700 text-black font-mono text-sm font-bold rounded hover:bg-orange-600 disabled:bg-zinc-800 disabled:text-zinc-600 disabled:cursor-not-allowed transition-colors",children:l?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"animate-pulse mr-2",children:"●"}),"PROCESSING..."]}):f?"DATA_LOCKED":"EXECUTE_ANALYSIS"})]}),(null==m?void 0:null===(e=m.comparison)||void 0===e?void 0:e.kpis)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-zinc-900 rounded border border-zinc-800 p-4",children:[(0,a.jsx)("div",{className:"text-xs font-mono text-gray-500 mb-1",children:"METRIC: MATCH_RATE"}),(0,a.jsxs)("div",{className:"text-2xl font-mono font-bold text-orange-700",children:[(100*m.comparison.kpis.matchRate).toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-xs font-mono text-gray-600 mt-1",children:["MATCHED: ",m.comparison.kpis.matchedGames,"/",m.comparison.kpis.totalGames]})]}),(0,a.jsxs)("div",{className:"bg-zinc-900 rounded border border-zinc-800 p-4",children:[(0,a.jsx)("div",{className:"text-xs font-mono text-gray-500 mb-1",children:"METRIC: AVG_DELTA"}),(0,a.jsx)("div",{className:"text-2xl font-mono font-bold ".concat(k(m.comparison.kpis.avgSpreadDelta)),children:m.comparison.kpis.avgSpreadDelta.toFixed(2)}),(0,a.jsxs)("div",{className:"text-xs font-mono text-gray-600 mt-1",children:["MEDIAN: ",m.comparison.kpis.medianSpreadDelta.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-zinc-900 rounded border border-zinc-800 p-4",children:[(0,a.jsx)("div",{className:"text-xs font-mono text-gray-500 mb-1",children:"METRIC: KEY_VIOLATIONS"}),(0,a.jsx)("div",{className:"text-2xl font-mono font-bold text-orange-700",children:m.comparison.kpis.keyNumberCrossings}),(0,a.jsx)("div",{className:"text-xs font-mono text-gray-600 mt-1",children:"THRESHOLDS: [3,7,10,14]"})]}),(0,a.jsxs)("div",{className:"bg-zinc-900 rounded border border-zinc-800 p-4",children:[(0,a.jsx)("div",{className:"text-xs font-mono text-gray-500 mb-1",children:"METRIC: FAV_FLIPS"}),(0,a.jsx)("div",{className:"text-2xl font-mono font-bold text-purple-400",children:m.comparison.kpis.favoriteFlips}),(0,a.jsx)("div",{className:"text-xs font-mono text-gray-600 mt-1",children:"INVERSIONS_DETECTED"})]})]}),(null==m?void 0:null===(t=m.comparison)||void 0===t?void 0:t.comparisons)&&(0,a.jsx)("div",{className:"bg-zinc-900 rounded border border-zinc-800 p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs font-mono",children:[(0,a.jsx)("input",{type:"checkbox",checked:u,onChange:e=>j(e.target.checked),className:"rounded bg-zinc-950 border-zinc-700 text-orange-700 focus:ring-orange-700"}),(0,a.jsx)("span",{className:"text-gray-500",children:"FILTER: ISSUES_ONLY"})]}),(0,a.jsxs)("div",{className:"ml-auto text-xs font-mono text-gray-500",children:["SHOWING: ",E().length," / ",(null==m?void 0:null===(r=m.comparison)||void 0===r?void 0:null===(s=r.comparisons)||void 0===s?void 0:s.length)||0]})]})}),(null==m?void 0:null===(o=m.comparison)||void 0===o?void 0:o.comparisons)&&(0,a.jsx)("div",{className:"bg-zinc-900 rounded border border-zinc-800 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-zinc-950 border-b border-zinc-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{onClick:()=>y("league"),className:"px-4 py-3 text-center text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["LEAGUE","league"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})}),(0,a.jsx)("th",{onClick:()=>y("date"),className:"px-4 py-3 text-center text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["DATE","date"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})}),(0,a.jsx)("th",{onClick:()=>y("team"),className:"px-4 py-3 text-left text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["MATCH","team"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})}),(0,a.jsx)("th",{onClick:()=>y("poolSpread"),className:"px-4 py-3 text-center text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["POOL","poolSpread"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})}),(0,a.jsx)("th",{onClick:()=>y("marketSpread"),className:"px-4 py-3 text-center text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["MARKET","marketSpread"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})}),(0,a.jsx)("th",{onClick:()=>y("delta"),className:"px-4 py-3 text-center text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["DELTA","delta"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})}),(0,a.jsx)("th",{onClick:()=>y("relDelta"),className:"px-4 py-3 text-center text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["REL_DELTA","relDelta"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})}),(0,a.jsx)("th",{onClick:()=>y("flags"),className:"px-4 py-3 text-center text-xs font-mono text-gray-500 cursor-pointer hover:bg-zinc-800 transition-colors select-none",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:["FLAGS","flags"===h&&(0,a.jsx)("span",{className:"text-orange-700",children:"asc"===N?"▲":"▼"})]})})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-zinc-800",children:E().map((e,t)=>{let s=e.gameTime?new Date(e.gameTime):null,n=s?"".concat((s.getMonth()+1).toString().padStart(2,"0"),"/").concat(s.getDate().toString().padStart(2,"0")):"N/A",r=s?"".concat(s.getHours().toString().padStart(2,"0"),":").concat(s.getMinutes().toString().padStart(2,"0")):"",o=0!==e.picksheetSpread?e.spreadDelta/Math.abs(e.picksheetSpread)*100:0;return(0,a.jsxs)("tr",{className:"hover:bg-zinc-800 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("span",{className:"font-mono text-xs ".concat("NFL"===e.league?"text-blue-400":"text-green-400"),children:e.league||"N/A"})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("div",{className:"text-xs font-mono text-gray-400",children:[(0,a.jsx)("div",{children:n}),(0,a.jsx)("div",{className:"text-gray-600",children:r})]})}),(0,a.jsxs)("td",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-xs font-mono text-gray-300",children:e.awayTeam}),(0,a.jsxs)("div",{className:"text-xs font-mono text-gray-500",children:["@ ",e.homeTeam]})]}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("span",{className:"font-mono text-sm text-gray-200",children:[-e.picksheetSpread>0?"+":"",-e.picksheetSpread]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("span",{className:"font-mono text-sm text-gray-200",children:[-e.marketSpread>0?"+":"",-e.marketSpread]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("span",{className:"font-mono text-sm font-bold ".concat(k(e.spreadDelta)),children:[e.spreadDelta>0?"+":"",e.spreadDelta.toFixed(1)]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("span",{className:"font-mono text-sm ".concat(Math.abs(o)>50?"text-red-500 font-bold":Math.abs(o)>25?"text-orange-600":"text-gray-400"),children:[o>0?"+":"",o.toFixed(1),"%"]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center gap-1",children:[e.crossesKeyNumber&&(0,a.jsxs)("span",{className:"px-2 py-1 text-xs font-mono bg-orange-950 text-orange-700 rounded",children:["K",e.keyNumbersCrossed.join(",")]}),e.favoriteFlipped&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-mono bg-purple-950 text-purple-400 rounded",children:"FLP"})]})})]},t)})})]})})}),(null==m?void 0:null===(c=m.comparison)||void 0===c?void 0:c.unmatched)&&m.comparison.unmatched.length>0&&(0,a.jsxs)("div",{className:"mt-6 bg-zinc-900 rounded border border-zinc-800 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-mono text-orange-700 mb-3",children:"UNMATCHED_ENTRIES"}),(0,a.jsx)("div",{className:"space-y-2",children:m.comparison.unmatched.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 text-xs font-mono",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded ".concat("picksheet"===e.source?"bg-blue-950 text-blue-400":"bg-green-950 text-green-400"),children:e.source.toUpperCase()}),(0,a.jsx)("div",{className:"text-gray-400",children:e.gameInfo})]},t))})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-xs font-mono text-gray-600",children:["SYSTEM_STATUS: ",f?"DATA_PERSISTENT":"READY"," | CACHE_MODE: ",f?"LOCKED":"DISABLED"," | REFRESH_TO_RESET"]})})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2893)}),_N_E=e.O()}]);