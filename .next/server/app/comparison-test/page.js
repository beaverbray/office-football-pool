(()=>{var e={};e.id=138,e.ids=[138],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4249:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(5768),s(2029),s(5866);var t=s(3191),r=s(8716),l=s(7922),i=s.n(l),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(a,o);let d=["",{children:["comparison-test",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5768)),"/Users/jb/Development/office_football_pool/src/app/comparison-test/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/jb/Development/office_football_pool/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/jb/Development/office_football_pool/src/app/comparison-test/page.tsx"],m="/comparison-test/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/comparison-test/page",pathname:"/comparison-test",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9955:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4977:(e,a,s)=>{Promise.resolve().then(s.bind(s,2666))},3768:()=>{},2666:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var t=s(326),r=s(7577);let l=[3,7,10,14];class i{calculateSpreadDelta(e,a){return e-a}checkKeyNumberCrossing(e,a){let s=[];for(let t of l)(e>t&&a<t||e<t&&a>t)&&s.push(t),(e>-t&&a<-t||e<-t&&a>-t)&&s.push(-t);return{crosses:s.length>0,numbers:s}}checkFavoriteFlip(e,a){return e>0&&a<0||e<0&&a>0}detectLeague(e,a){for(let s of["Cardinals","Falcons","Ravens","Bills","Panthers","Bears","Bengals","Browns","Cowboys","Broncos","Lions","Packers","Texans","Colts","Jaguars","Chiefs","Raiders","Chargers","Rams","Dolphins","Vikings","Patriots","Saints","Giants","Jets","Eagles","Steelers","49ers","Seahawks","Buccaneers","Titans","Commanders","Washington"])if(e.includes(s)||a.includes(s))return"NFL";for(let s of["State","University","College","Tech","A&M","Central","Eastern","Western","Northern","Southern","Carolina","Florida","Georgia","Alabama","Auburn","Tennessee","Kentucky","Virginia","Michigan","Ohio","Penn","Texas","Oklahoma","Kansas","Iowa","UCLA","USC","Stanford","California","Oregon","Washington","Arizona","Colorado","Utah","Nevada","Hawaii","Louisiana","Mississippi","Arkansas","Missouri","Illinois","Indiana","Wisconsin","Minnesota","Nebraska","Purdue","Northwestern","Rutgers","Maryland","Boston","Syracuse","Pittsburgh","Duke","Wake Forest","NC State","Clemson","Miami","FSU","UCF","USF","Temple","Navy","Army","Air Force","Notre Dame","BYU","TCU","Baylor","SMU","Houston","Rice","Tulane","Memphis","Vanderbilt","Ole Miss","LSU"])if(e.includes(s)||a.includes(s))break;return"NCAAF"}compareGame(e,a,s=1){let t=this.calculateSpreadDelta(e.spread,a.homeSpread),r=this.checkKeyNumberCrossing(e.spread,a.homeSpread),l=this.checkFavoriteFlip(e.spread,a.homeSpread),i=a.league||this.detectLeague(a.homeTeam,a.awayTeam);return{gameId:a.gameId,homeTeam:a.homeTeam,awayTeam:a.awayTeam,gameTime:a.gameTime,league:i,picksheetSpread:e.spread,marketSpread:a.homeSpread,spreadDelta:t,crossesKeyNumber:r.crosses,keyNumbersCrossed:r.numbers,favoriteFlipped:l,confidence:s,matched:!0}}compareGames(e,a,s){let t=[],r=new Set(e.map((e,a)=>a)),l=new Set(a.map((e,a)=>a));for(let i of s){let s=e[i.picksheetIndex],n=a[i.marketIndex];s&&n&&(t.push(this.compareGame(s,n,i.confidence)),r.delete(i.picksheetIndex),l.delete(i.marketIndex))}let i=[];for(let a of Array.from(r)){let s=e[a];i.push({source:"picksheet",gameInfo:`${s.awayTeam} @ ${s.homeTeam} (${s.spread})`,reason:"No matching market game found",gameTime:s.gameTime})}for(let e of Array.from(l)){let s=a[e];i.push({source:"market",gameInfo:`${s.awayTeam} @ ${s.homeTeam} (${s.homeSpread})`,reason:"No matching picksheet game found",gameTime:s.gameTime})}let n=this.calculateKPIs(t,e.length,i.filter(e=>"picksheet"===e.source).length);return{comparisons:t,kpis:n,unmatched:i}}calculateKPIs(e,a,s){let t=e.length;if(0===t)return{totalGames:a,matchedGames:0,unmatchedGames:s,matchRate:0,avgSpreadDelta:0,medianSpreadDelta:0,p95SpreadDelta:0,stdDevSpreadDelta:0,keyNumberCrossings:0,keyNumberCrossingRate:0,favoriteFlips:0,favoriteFlipRate:0,largestDelta:null,timestamp:new Date().toISOString()};let r=e.map(e=>Math.abs(e.spreadDelta)),l=r.reduce((e,a)=>e+a,0)/r.length,i=[...r].sort((e,a)=>e-a),n=i[Math.floor(i.length/2)],o=Math.floor(.95*i.length),d=i[Math.min(o,i.length-1)],c=r.reduce((e,a)=>e+Math.pow(a-l,2),0)/r.length,m=e.filter(e=>e.crossesKeyNumber).length,p=e.filter(e=>e.favoriteFlipped).length,x=null;if(e.length>0){let a=e.reduce((e,a)=>Math.abs(a.spreadDelta)>Math.abs(e.spreadDelta)?a:e);x={gameId:a.gameId,teams:`${a.awayTeam} @ ${a.homeTeam}`,delta:a.spreadDelta}}return{totalGames:a,matchedGames:t,unmatchedGames:s,matchRate:t/a,avgSpreadDelta:Number(l.toFixed(2)),medianSpreadDelta:Number(n.toFixed(2)),p95SpreadDelta:Number(d.toFixed(2)),stdDevSpreadDelta:Number(Math.sqrt(c).toFixed(2)),keyNumberCrossings:m,keyNumberCrossingRate:Number((m/t).toFixed(3)),favoriteFlips:p,favoriteFlipRate:Number((p/t).toFixed(3)),largestDelta:x,timestamp:new Date().toISOString()}}static formatSpread(e,a){return 0===a?`${e} PK`:`${e} ${a>0?"+":""}${a}`}static getRiskLevel(e){let a=Math.abs(e);return a<=2?"low":a<=4?"medium":a<=7?"high":"critical"}static getRiskColor(e){switch(e){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-orange-600";case"critical":return"text-red-600";default:return"text-gray-600"}}}function n(){let[e,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[n,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),x=`Dallas Cowboys @ Philadelphia Eagles -3
Kansas City Chiefs @ LA Chargers +7.5
Tampa Bay Buccaneers @ Atlanta Falcons -2.5
#11 Alabama @ Michigan State +14
Ohio State @ Tennessee -7
New England Patriots @ Buffalo Bills -9.5`,h=`Philadelphia Eagles @ Dallas Cowboys -3.5
LA Chargers @ Kansas City Chiefs +6.5
Atlanta Falcons @ Tampa Bay Buccaneers -3
Michigan State @ Alabama +13.5
Tennessee @ Ohio State -6.5
Buffalo Bills @ New England Patriots -10`,u=(e,a)=>e.trim().split("\n").filter(e=>e.trim()).map(e=>{let s=e.lastIndexOf("@");if(-1===s)return null;let t=e.substring(0,s).trim(),r=e.substring(s+1).trim(),l=r.match(/([+-]?\d+\.?\d*)$/);if(!l)return null;let i=parseFloat(l[0]),n=r.substring(0,r.lastIndexOf(l[0])).trim();return a?{awayTeam:t,homeTeam:n,spread:i}:{gameId:`${t}-${n}`.toLowerCase().replace(/\s+/g,"-"),awayTeam:t,homeTeam:n,homeSpread:i,gameTime:new Date().toISOString()}}).filter(Boolean),g=async()=>{c(!0);try{let a=u(e,!0),t=m?null:u(s,!1),r=await fetch("/api/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({picksheetGames:a,marketGames:t,useOddsAPI:m})}),l=await r.json();l.success&&o({comparisons:l.comparisons,kpis:l.kpis,unmatched:l.unmatched})}catch(e){console.error("Error running comparison:",e)}finally{c(!1)}},b=e=>{let a=i.getRiskLevel(e);return i.getRiskColor(a)};return t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDCCA Spread Comparison & KPI Calculator"}),t.jsx("p",{className:"text-gray-600",children:"Compare picksheet spreads against market odds and calculate key performance indicators"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Picksheet Games"}),t.jsx("textarea",{value:e,onChange:e=>a(e.target.value),className:"w-full h-48 p-3 border rounded-lg font-mono text-sm",placeholder:"Format: Away Team @ Home Team +/-Spread"}),t.jsx("button",{onClick:()=>a(x),className:"mt-2 px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700",children:"Load Sample"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Market Odds",(0,t.jsxs)("label",{className:"ml-4 text-sm font-normal",children:[t.jsx("input",{type:"checkbox",checked:m,onChange:e=>p(e.target.checked),className:"mr-2"}),"Use Live Odds API"]})]}),t.jsx("textarea",{value:s,onChange:e=>l(e.target.value),className:"w-full h-48 p-3 border rounded-lg font-mono text-sm",placeholder:"Format: Away Team @ Home Team +/-Spread",disabled:m}),t.jsx("button",{onClick:()=>l(h),className:"mt-2 px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700",disabled:m,children:"Load Sample"})]})]}),t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("button",{onClick:g,disabled:d||!e||!s&&!m,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:d?"Comparing...":"Compare Spreads"})}),n?.kpis&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDCC8 Key Performance Indicators"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Match Rate"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[(100*n.kpis.matchRate).toFixed(1),"%"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[n.kpis.matchedGames,"/",n.kpis.totalGames," games"]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Avg Spread Delta"}),t.jsx("div",{className:`text-2xl font-bold ${b(n.kpis.avgSpreadDelta)}`,children:n.kpis.avgSpreadDelta}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["σ = ",n.kpis.stdDevSpreadDelta]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Median Delta"}),t.jsx("div",{className:`text-2xl font-bold ${b(n.kpis.medianSpreadDelta)}`,children:n.kpis.medianSpreadDelta}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["P95: ",n.kpis.p95SpreadDelta]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Key # Crossings"}),t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n.kpis.keyNumberCrossings}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(100*n.kpis.keyNumberCrossingRate).toFixed(1),"% rate"]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Favorite Flips"}),t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.kpis.favoriteFlips}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(100*n.kpis.favoriteFlipRate).toFixed(1),"% rate"]})]}),n.kpis.largestDelta&&(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded md:col-span-3",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Largest Delta"}),(0,t.jsxs)("div",{className:`text-lg font-bold ${b(n.kpis.largestDelta.delta)}`,children:[n.kpis.largestDelta.delta," points"]}),t.jsx("div",{className:"text-xs text-gray-500",children:n.kpis.largestDelta.teams})]})]})]}),n?.comparisons&&n.comparisons.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsx("h2",{className:"text-xl font-semibold",children:"\uD83C\uDFC8 Game Comparisons"})}),t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Game"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Picksheet"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Market"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Delta"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Flags"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Confidence"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:n.comparisons.map((e,a)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-4 py-2 text-sm",children:[t.jsx("div",{children:e.awayTeam}),(0,t.jsxs)("div",{className:"text-gray-500",children:["@ ",e.homeTeam]})]}),(0,t.jsxs)("td",{className:"px-4 py-2 text-sm font-mono",children:[e.picksheetSpread>0?"+":"",e.picksheetSpread]}),(0,t.jsxs)("td",{className:"px-4 py-2 text-sm font-mono",children:[e.marketSpread>0?"+":"",e.marketSpread]}),(0,t.jsxs)("td",{className:`px-4 py-2 text-sm font-bold ${b(e.spreadDelta)}`,children:[e.spreadDelta>0?"+":"",e.spreadDelta.toFixed(1)]}),t.jsx("td",{className:"px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[e.crossesKeyNumber&&(0,t.jsxs)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded",children:["Key #",e.keyNumbersCrossed.join(", ")]}),e.favoriteFlipped&&t.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded",children:"Fav Flip"})]})}),t.jsx("td",{className:"px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:`font-mono ${e.confidence>=.9?"text-green-600":e.confidence>=.7?"text-yellow-600":"text-red-600"}`,children:[(100*e.confidence).toFixed(0),"%"]})})]},a))})]})})]}),n?.unmatched&&n.unmatched.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b",children:t.jsx("h2",{className:"text-xl font-semibold",children:"⚠️ Unmatched Games"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"space-y-2",children:n.unmatched.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded ${"picksheet"===e.source?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:e.source}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.gameInfo}),t.jsx("div",{className:"text-gray-500",children:e.reason})]})]},a))})})]})]})})}new i},5768:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var t=s(8570);let r=(0,t.createProxy)(String.raw`/Users/jb/Development/office_football_pool/src/app/comparison-test/page.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,t.createProxy)(String.raw`/Users/jb/Development/office_football_pool/src/app/comparison-test/page.tsx#default`)},2029:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l,metadata:()=>r});var t=s(9510);s(5023);let r={title:"Spread Analysis System",description:"Picksheet Market Comparison Engine"};function l({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:"bg-black",children:e})})}},5023:()=>{}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[948,471],()=>s(4249));module.exports=t})();