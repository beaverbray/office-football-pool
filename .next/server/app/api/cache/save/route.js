"use strict";(()=>{var e={};e.id=902,e.ids=[902],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},1310:(e,r,s)=>{let t,a;s.r(r),s.d(r,{originalPathname:()=>b,patchFetch:()=>I,requestAsyncStorage:()=>g,routeModule:()=>x,serverHooks:()=>f,staticGenerationAsyncStorage:()=>v});var o={};s.r(o),s.d(o,{POST:()=>m});var n=s(9303),i=s(8716),c=s(670),u=s(7070),p=s(9498);let l=require("node:crypto"),d="https://eoslblqescncxcypkmvj.supabase.co",h="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVvc2xibHFlc2NuY3hjeXBrbXZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4NjU5OTIsImV4cCI6MjA1MzQ0MTk5Mn0.wd3uTRaLKt0VXPjZX50Cah-ReLn9jLZcsVcLJlM14aU";async function m(e){try{let r=await e.json(),s=function(e=21){var r;r=e|=0,!t||t.length<r?(t=Buffer.allocUnsafe(128*r),l.webcrypto.getRandomValues(t),a=0):a+r>t.length&&(l.webcrypto.getRandomValues(t),a=0),a+=r;let s="";for(let r=a-e;r<a;r++)s+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&t[r]];return s}(10);if(!d||!h)return console.log("Supabase not configured, returning share ID for local use"),u.NextResponse.json({success:!0,shareId:s,shareUrl:`/share/${s}`,warning:"Database not configured - share link will not persist"});let o=(0,p.eI)(d,h),{data:n,error:i}=await o.from("shared_analyses").insert({share_id:s,pipeline_data:r,metadata:{source:"web",version:"1.0"}}).select().single();if(i){if(console.error("Error saving to Supabase:",i),"42P01"===i.code)return u.NextResponse.json({error:"Database table not found",message:"Please run the migration in supabase/migrations/002_create_shared_analyses.sql"},{status:503});throw i}return u.NextResponse.json({success:!0,shareId:s,shareUrl:`/share/${s}`,expiresAt:n.expires_at})}catch(e){return console.error("Error saving to cache:",e),u.NextResponse.json({error:"Failed to save analysis"},{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/cache/save/route",pathname:"/api/cache/save",filename:"route",bundlePath:"app/api/cache/save/route"},resolvedPagePath:"/Users/jb/Development/office_football_pool/src/app/api/cache/save/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:v,serverHooks:f}=x,b="/api/cache/save/route";function I(){return(0,c.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:v})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,972,498],()=>s(1310));module.exports=t})();