"use strict";(()=>{var e={};e.id=640,e.ids=[640],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},3442:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{GET:()=>d});var a=t(9303),o=t(8716),i=t(670),n=t(7070),u=t(9498);let p="https://eoslblqescncxcypkmvj.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVvc2xibHFlc2NuY3hjeXBrbXZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4NjU5OTIsImV4cCI6MjA1MzQ0MTk5Mn0.wd3uTRaLKt0VXPjZX50Cah-ReLn9jLZcsVcLJlM14aU";async function d(e,{params:r}){try{let{id:e}=r;if(!e)return n.NextResponse.json({error:"Share ID is required"},{status:400});if(!p||!c)return console.log("Supabase not configured"),n.NextResponse.json({error:"Database not configured",message:"Please configure Supabase environment variables"},{status:503});let t=(0,u.eI)(p,c),{data:s,error:a}=await t.from("shared_analyses").select("*").eq("share_id",e).single();if(a){if(console.error("Error fetching from Supabase:",a),"PGRST116"===a.code)return n.NextResponse.json({error:"Analysis not found or expired"},{status:404});if("42P01"===a.code)return n.NextResponse.json({error:"Database table not found",message:"Please run the migration in supabase/migrations/002_create_shared_analyses.sql"},{status:503});throw a}if(s.expires_at&&new Date(s.expires_at)<new Date)return n.NextResponse.json({error:"Share link has expired"},{status:410});return await t.from("shared_analyses").update({view_count:(s.view_count||0)+1}).eq("share_id",e),n.NextResponse.json({success:!0,data:s.pipeline_data,createdAt:s.created_at,expiresAt:s.expires_at,viewCount:s.view_count})}catch(e){return console.error("Error retrieving from cache:",e),n.NextResponse.json({error:"Failed to retrieve analysis"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/cache/get/[id]/route",pathname:"/api/cache/get/[id]",filename:"route",bundlePath:"app/api/cache/get/[id]/route"},resolvedPagePath:"/Users/jb/Development/office_football_pool/src/app/api/cache/get/[id]/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:m}=l,f="/api/cache/get/[id]/route";function g(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972,498],()=>t(3442));module.exports=s})();