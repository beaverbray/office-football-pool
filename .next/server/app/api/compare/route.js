"use strict";(()=>{var e={};e.id=90,e.ids=[90],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4202:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>x,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>u,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l});var r={};t.r(r),t.d(r,{POST:()=>p});var o=t(9303),n=t(8716),m=t(670),s=t(7070),c=t(5382),i=t(7359),d=t(2468);async function p(e){try{let{picksheetGames:a,marketGames:t,useOddsAPI:r=!1}=await e.json(),o=t;if(r&&!t)try{let e=(0,d.Rr)(),{nfl:a,ncaaf:t}=await e.getAllSpreads();o=[...a,...t].map(a=>{let t=e.constructor.getBestSpread(a);return{gameId:a.id,homeTeam:t.homeTeam,awayTeam:t.awayTeam,homeSpread:t.homeSpread||0,gameTime:a.commence_time}})}catch(e){return console.error("Failed to fetch odds from API:",e),s.NextResponse.json({error:"Failed to fetch market odds"},{status:500})}if(!a||!o)return s.NextResponse.json({error:"Missing picksheetGames or marketGames"},{status:400});let n=new i.c,m=[];for(let e=0;e<a.length;e++){let t=a[e],r={marketIndex:-1,confidence:0};for(let e=0;e<o.length;e++){let a=o[e],m=await n.matchTeam(t.homeTeam),s=await n.matchTeam(a.homeTeam),c=await n.matchTeam(t.awayTeam),i=await n.matchTeam(a.awayTeam);if(m.matchedName===s.matchedName&&c.matchedName===i.matchedName||m.matchedName===i.matchedName&&c.matchedName===s.matchedName){let a=Math.min(m.confidence,c.confidence,s.confidence,i.confidence);a>r.confidence&&(r={marketIndex:e,confidence:a})}}-1!==r.marketIndex&&m.push({picksheetIndex:e,marketIndex:r.marketIndex,confidence:r.confidence})}let p=c.b.compareGames(a,o,m);return s.NextResponse.json({success:!0,...p})}catch(e){return console.error("Error in comparison:",e),s.NextResponse.json({error:"Failed to compare games",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/compare/route",pathname:"/api/compare",filename:"route",bundlePath:"app/api/compare/route"},resolvedPagePath:"/Users/jb/Development/office_football_pool/src/app/api/compare/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:l,serverHooks:f}=u,x="/api/compare/route";function g(){return(0,m.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:l})}}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[948,972,319,67,811,359,624],()=>t(4202));module.exports=r})();